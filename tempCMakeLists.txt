cmake_minimum_required(VERSION 3.20)

project(LetsChatServer VERSION 1.0)

# 构建类型 Debug or Release
set(CMAKE_BUILD_TYPE Debug)

# 输出目录
if(${CMAKE_BUILD_TYPE} STREQUAL Debug)
  set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin/debug)
else()
  set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin/release)
endif()

# C语言编译器配置
set(CMAKE_C_COMPILER /usr/bin/gcc)
set(CMAKE_C_STANDARD gnu17)
add_compile_options(-Wall -Werror)
if(${CMAKE_BUILD_TYPE} STREQUAL Release)
  add_compile_options(-O2)
endif()
include_directories(${PROJECT_SOURCE_DIR}/include)

# 日志库配置
set(ENABLE_LOG 1)
set(LOG_CONF_DIR ${PROJECT_SOURCE_DIR}/log/config)
set(LOG_OUTPUT_DIR ${PROJECT_SOURCE_DIR}/log/log)
configure_file(${LOG_CONF_DIR}/log.conf.in ${LOG_CONF_DIR}/log.conf)

# 项目配置文件
set(CONF_DIR ${PROJECT_SOURCE_DIR}/include/configure)
configure_file(${CONF_DIR}/configure.h.in ${CONF_DIR}/configure.h)
